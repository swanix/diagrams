<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <title>Swanix Diagrams - Demo</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Favicon -->
  <link rel="shortcut icon" href="assets/images/favicon.ico">
  <!-- Scripts -->
  <script src="https://unpkg.com/@svgdotjs/svg.js@3.0.16/dist/svg.min.js"></script>
  <script src='https://unpkg.com/@svgdotjs/svg.panzoom.js@2.1.1/dist/svg.panzoom.min.js'></script>
  <!-- Styles -->
  <style> 
  html, body { padding: 0; margin: 0; overflow: hidden }

  button {
  padding: 6px 8px;
  border-radius: 6px;
  background: #FFF;
  border: 2px solid #EDEDED;
  outline: none;
  cursor: pointer;
  position: absolute;
  font-size: 16px;
  }

  button:hover {
    background: #FAFAFA;
  }
 
  </style>
</head>
<body>

<div id="canvas">
  <button onclick="toggleFullScreen();">â¤¡</button>
</div>

<script>

// load SVG file
fetch('org-chart.svg')

// Get the raw text of SVG file as a string
.then(response => response.text())
.then((image) => {
  // Workaround for a strange behavior (a bug?) of svg.js 
  let startOfSvg = image.indexOf('<svg')
  startOfSvg = startOfSvg >= 0 ? startOfSvg : 0
  // Draw SVG file
  const canvas = SVG(image.slice(startOfSvg))
  .addTo('#canvas')
  .size('100vw', '100vh')
  .zoom(0.08) // uses center of viewport by default
  .panZoom({ zoomMin: 0.05, zoomMax: 1.5 })

  // Prevent click on panning
  canvas.on('panning', function (ev) {
    let links = document.getElementsByTagName("a");
    for (let i = 0; i < links.length; i++) {
      links[i].onclick = function() {return false;};
    }
  })
  canvas.on('click', function (ev) {
    let links = document.getElementsByTagName("a");
    for (let i = 0; i < links.length; i++) {
      links[i].setAttribute('target', '_blank');
      links[i].onclick = function() {return true;};
    }
  })
})

// Fullscreen Mode
// Based on https://developer.mozilla.org/es/docs/Web/API/Fullscreen_API

function toggleFullScreen() {
  if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    }
  }
}

</script>

</body>
</html>