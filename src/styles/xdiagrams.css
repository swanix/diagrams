/**
 * XDiagrams CSS 
 * Módulo reutilizable de estilos
 */

/* ===== ICONOS XDIAGRAMS ===== */
/* 
 * Para agregar nuevos iconos:
 * 1. Agregar el icono SVG a la carpeta icons/thumbs
 * 2. Actualizar el archivo .woff en icons/xdiagrams.woff
 * 3. Agregar la definición CSS con el código Unicode correspondiente
 * 4. Actualizar el mapeo en js/xdiagrams-thumbs.js
 */
@font-face {
  font-family: 'xdiagrams-icons';
  src: url('../icons/xdiagrams.woff?thaw8n') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: block;
}

[class^=""], [class*=""],
text[font-family="xdiagrams-icons"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  font-family: 'xdiagrams-icons' !important;
  speak: never;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;

  /* Better Font Rendering =========== */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Estilos específicos para elementos SVG que usan la fuente xdiagrams-icons */
text[font-family="xdiagrams-icons"] {
  fill: var(--thumb-fill, currentColor);
}

/* Definiciones de iconos individuales */
.detail:before {
  content: "\e900";
  color: var(--thumb-fill);
}
.document:before {
  content: "\e901";
  color: var(--thumb-fill);
}
.form:before {
  content: "\e934";
  color: var(--thumb-fill);
}
.grid:before {
  content: "\e938";
  color: var(--thumb-fill);
}
.home:before {
  content: "\e939";
  color: var(--thumb-fill);
}
.list:before {
  content: "\e93b";
  color: var(--thumb-fill);
}
.modal:before {
  content: "\e93c";
  color: var(--thumb-fill);
}
.profile:before {
  content: "\e941";
  color: var(--thumb-fill);
}
.report:before {
  content: "\e942";
  color: var(--thumb-fill);
}
.settings:before {
  content: "\e943";
  color: var(--thumb-fill);
}

/* ===== VARIABLES CSS ===== */
:root {
  /* ===== Color Base Variables ===== */
  --color-base: 0 0%;

  /* ===== Background and Images ===== */
  --app-bg: hsl(var(--color-base) 10% / 1);
  --canvas-bg: hsl(var(--color-base) 8% / 1);
  --text-color: hsl(var(--color-base) 80% / 1);
  --text-color-links: hsl(var(--color-base) 60% / 1);
  --bg-image: none;
  --bg-opacity: 1;
  --image-filter: none;

  /* ===== Thumbnails ===== */
  --thumb-fill: hsl(var(--color-base) 65% / 1);
  --thumb-fill-hover: hsl(var(--color-base) 55% / 1);
  --thumb-fill-focus: hsl(var(--color-base) 10% / 1);
  --thumb-stroke: 6px;
  --thumb-opacity: 1;
  --thumb-filter: none;

  /* ===== Text and Nodes ===== */
  --node-fill: hsl(var(--color-base) 97% / 1);
  --node-fill-hover: hsl(var(--color-base) 97% / 1);
  --node-fill-focus: hsl(var(--color-base) 10% / 1);
  --node-stroke: hsl(var(--color-base) 40% / 1);
  --node-stroke-hover: hsl(var(--color-base) 10% / 1);
  --node-stroke-focus: hsl(var(--color-base) 60% / 1);
  --node-selection-border: 6px;
  --node-selection-focus: hsl(var(--color-base) 10% / 1);
  --node-selection-hover: #00b8cc;
  --node-selection-selected: hsl(var(--color-base) 90% / 1);
  
  /* ===== Node Text Colors ===== */
  --node-text: hsl(var(--color-base) 35% / 1);
  --node-text-hover: hsl(var(--color-base) 35% / 1);
  --node-text-focus: hsl(var(--color-base) 10% / 1);
  
  /* ===== Node Shadow Colors ===== */
  --node-shadow: none;
  --node-shadow-hover: none;
  --node-shadow-focus: 0 5px 2px rgba(0, 0, 0, 0.1);

  /* ===== Links and Labels ===== */
  --node-connector: hsl(var(--color-base) 50% / 1);
  --node-text-secondary: hsl(var(--color-base) 65% / 1);
  --node-text-secondary-focus: hsl(var(--color-base) 90% / 1);

  /* ===== Clusters ===== */
  --cluster-bg: hsl(var(--color-base) 15% / 1);
  --cluster-stroke: hsl(var(--color-base) 25% / 1);
  --cluster-title-color: hsl(var(--color-base) 80% / 0.8);
  --cluster-title-bg: hsl(var(--color-base) 10% / 1);
  --cluster-hover-bg: hsl(var(--color-base) 25% / 1);
  --cluster-hover-stroke: hsl(var(--color-base) 28% / 1);
  --cluster-hover-title-color: #00eaff;
  
  /* ===== Cluster Hover por Nivel de Zoom ===== */
  /* Zoom <= 7% (vista general) */
  --cluster-hover-bg-zoom-out: hsl(var(--color-base) 19% / 1);
  --cluster-hover-stroke-zoom-out:  hsl(var(--color-base) 32% / 1);
  --cluster-hover-title-color-zoom-out: hsl(var(--color-base) 32% / 1);
  
  /* Zoom > 7% (vista detallada) */
  --cluster-hover-bg-zoom-in: hsl(var(--color-base) 16% / 1);
  --cluster-hover-stroke-zoom-in: hsl(var(--color-base) 28% / 1);
  --cluster-hover-title-color-zoom-in: #00eaff;
  
  --cluster-selected-bg: hsl(var(--color-base) 28% / 1);
  --cluster-selected-stroke: hsl(var(--color-base) 20% / 0.8);
  --cluster-selected-title-color: hsl(var(--color-base) 100% / 0.8);
  
  /* ===== Sombras de Clusters ===== */
  --cluster-shadow: none;
  --cluster-focus-shadow: none;
  --cluster-hover-shadow: none;
  --cluster-selected-shadow: none;
  
  /* ===== Sombras por Nivel de Zoom ===== */
  --cluster-hover-shadow-zoom-out: none;
  --cluster-hover-shadow-zoom-in: none;
  
  --cluster-tooltip-bg: hsl(var(--color-base) 10% / 1);
  --cluster-tooltip-color: hsl(var(--color-base) 80% / 1);
  --cluster-tooltip-border: hsl(var(--color-base) 40% / 1) 2px solid;
  --cluster-tooltip-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

  /* ===== Texto Gigante de Cluster en Hover ===== */
  --cluster-hover-title-large-font-size: 360px;
  --cluster-hover-title-large-font-weight: bold;
  --cluster-hover-title-large-font-family: Arial, Helvetica, sans-serif;
  --cluster-hover-title-large-color: hsl(var(--color-base) 80% / 1);
  --cluster-hover-title-large-bg-color: hsl(var(--color-base) 10% / 1);
  --cluster-hover-title-large-border-color: hsl(var(--color-base) 40% / 1);
  --cluster-hover-title-large-border-width: 30px;
  --cluster-hover-title-large-padding-x: 160px;
  --cluster-hover-title-large-padding-y: 90px;
  --cluster-hover-title-large-border-radius: 80px;

  /* ===== Loading ===== */
  --loading-color: hsl(var(--color-base) 60% / 1);
  --loading-bg: hsl(var(--color-base) 15% / 1);

  /* ===== Title Pill Variables ===== */
  --title-pill-text-color: hsl(var(--color-base) 90% / 1);
  --title-pill-logo-filter: invert(1) brightness(1) contrast(1);

  /* ===== UI Panel Variables ===== */
  --ui-panel-bg: hsl(var(--color-base) 15% / 1);
  --ui-panel-border: hsl(var(--color-base) 25% / 1);
  --ui-panel-text: hsl(var(--color-base) 95% / 1); /* Texto casi blanco */
  --ui-panel-text-muted: hsl(var(--color-base) 85% / 1); /* Texto muted más claro */
  
  /* ===== UI Focus Color ===== */
  --ui-focus: hsl(var(--color-base) 100% / 1);
  
  /* ===== Border Radius Variables ===== */
  --cluster-border-radius: 48px;
  --node-border-radius: 8px;
  
  /* ===== Side Panel ===== */
  --side-panel-width: 350px;
  
  /* ===== UI Controls ===== */
  --ui-control-bg: hsl(var(--color-base) 25% / 1);
  --ui-control-bg-hover: hsl(var(--color-base) 30% / 1);
  --ui-control-bg-active: hsl(var(--color-base) 40% / 1);
  --ui-control-text: hsl(var(--color-base) 80% / 1);
  --ui-control-icon: hsl(var(--color-base) 60% / 1);
  --ui-control-border: hsl(var(--color-base) 32% / 1);
  --ui-control-border-hover: hsl(var(--color-base) 50% / 1);
  --ui-control-border-focus: hsl(var(--color-base) 60% / 1);
  --ui-control-focus: hsl(var(--color-base) 60% / 1);
  --ui-control-placeholder: hsl(var(--color-base) 50% / 1);
  --ui-control-shadow: rgba(0, 0, 0, 0.1);
  --ui-control-shadow-focus: rgba(66, 66, 66, 0.2);

  /* ===== UI Control Layout ===== */
  --ui-control-padding: 15px;
  --ui-control-border-radius: 12px;
  --ui-control-gap: 10px;
  --ui-control-header-margin: 10px;
  --ui-control-btn-padding: 10px 20px;
  --ui-control-btn-min-width: 200px;
  --ui-control-btn-border-radius: 8px;
  --ui-control-btn-opacity-disabled: 0.5;

  /* ===== Theme Toggle Button ===== */
  --theme-toggle-size: 40px;
  --theme-toggle-border-radius: 50%;
  --theme-icon-size: 18px;

  /* ===== Transition Variables ===== */
  --transition-fast: 0.2s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;
  --transition-bounce: 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);

  /* ===== Tree Spacing ===== */
  --tree-simple-vertical-spacing: 80;
  --tree-simple-horizontal-spacing: 160;
  --tree-vertical-spacing: 100;
  --tree-horizontal-spacing: 180;

  /* ===== Subtitle text ===== */
  --subtitle-font-size: 6px;
  --subtitle-dy: 0.25em;
  --subtitle-x: -35px;
  --subtitle-y: -50px;
  --subtitle-anchor: start;

  /* ===== Button ===== */
  --btn-bg: #000000;
  --btn-bg-hover: #ffffff;
  --btn-text: #ffffff;
  --btn-text-hover: #000000;

  /* ===== Error message ===== */
  --error-message-color: hsl(var(--color-base) 50% / 0.5);
  --label-max-width: 60px;

  /* ===== Logo filter ===== */
  --logo-filter: invert(1);

  /* ===== Node text colors ===== */
  --node-name-text-color: hsl(var(--color-base) 15% / 1);  /* Color blanco para nombres de nodos */

  /* ===== Node dimensions ===== */
  --node-bg-width: 80px;
  --node-bg-height: 100px;
  --node-bg-x: -42px;
  --node-bg-y: -62px;
  --node-bg-stroke: 1px;
  --image-x: -38px;
  --image-y: -54px;
  --image-width: 72px;
  --image-height: 65px;

  /* ===== Shadow Variables ===== */
  --side-panel-shadow: -4px 0 8px rgba(0, 0, 0, 0.05);
  --topbar-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);


}

/* ===== THEMES ===== */
/* Nota: El tema dark es el predeterminado (definido en :root) */
/* Solo necesitamos definir las variables que cambian para el tema light */

.theme-light {
  /* ===== Background and Images ===== */
  --app-bg: hsl(var(--color-base) 87% / 1);
  --canvas-bg: hsl(var(--color-base) 92% / 1);
  --text-color: hsl(var(--color-base) 20% / 1);
  --text-color-links: hsl(var(--color-base) 10% / 1);

  /* ===== Thumbnails ===== */
  --thumb-fill: hsl(var(--color-base) 60% / 1);
  --thumb-fill-hover: hsl(var(--color-base) 55% / 1);
  --thumb-fill-focus: hsl(var(--color-base) 90% / 1);

  /* ===== Text and Nodes ===== */
  --node-fill: hsl(var(--color-base) 35% / 1);
  --node-fill-hover: hsl(var(--color-base) 25% / 1);
  --node-fill-focus: hsl(var(--color-base) 85% / 1);
  --node-stroke: hsl(var(--color-base) 60% / 1);
  --node-stroke-hover: hsl(var(--color-base) 25% / 1);
  --node-stroke-focus: hsl(var(--color-base) 40% / 1);
  --node-selection-border: 6px;
  --node-selection-focus: hsl(var(--color-base) 90% / 1);
  --node-selection-hover: #00b8cc;
  --node-selection-selected: hsl(var(--color-base) 10% / 1);
  
  /* ===== Node Text Colors ===== */
  --node-text: hsl(var(--color-base) 85% / 1);
  --node-text-hover: hsl(var(--color-base) 80% / 1);
  --node-text-focus: hsl(var(--color-base) 80% / 1);
  
  /* ===== Node Shadow Colors ===== */
  --node-shadow: none;
  --node-shadow-hover: none;
  --node-shadow-focus: 0 5px 2px rgba(0, 0, 0, 0.1);

  /* ===== Links and Labels ===== */
  --node-connector: hsl(var(--color-base) 75% / 1);
  --node-text-secondary: hsl(var(--color-base) 40% / 1);
  --node-text-secondary-focus: hsl(var(--color-base) 90% / 1);

  /* ===== Clusters ===== */
  --cluster-bg: hsl(var(--color-base) 90% / 0.8);
  --cluster-stroke: hsl(var(--color-base) 55% / 0.5);
  --cluster-title-color: hsl(var(--color-base) 45% / 1);
  --cluster-title-bg: hsl(var(--color-base) 90% / 1);
  --cluster-hover-bg: hsl(var(--color-base) 60% / 1);
  --cluster-hover-stroke: hsl(var(--color-base) 60% / 0.5);
  
  /* ===== Cluster Hover por Nivel de Zoom ===== */
  /* Zoom <= 10% (vista general) */
  --cluster-hover-bg-zoom-out: hsl(var(--color-base) 92% / 1);
  --cluster-hover-stroke-zoom-out: hsl(var(--color-base) 60% / 0.5);
  --cluster-hover-title-color-zoom-out: hsl(var(--color-base) 60% / 0.5);
  
  /* Zoom > 10% (vista detallada) */
  --cluster-hover-bg-zoom-in: hsl(var(--color-base) 90% / 0.4);
  --cluster-hover-stroke-zoom-in: hsl(var(--color-base) 60% / 0.5);
  --cluster-hover-title-color-zoom-in: #00eaff;
  
  --cluster-selected-bg: hsl(var(--color-base) 96% / 1);
  --cluster-selected-stroke: hsl(var(--color-base) 75% / 0.8);
  --cluster-selected-title-color: hsl(var(--color-base) 100% / 0.8);
  
  /* ===== Sombras de Clusters ===== */
  --cluster-shadow: none;
  --cluster-focus-shadow: none;
  --cluster-hover-shadow: none;
  --cluster-selected-shadow: none;
  
  /* ===== Sombras por Nivel de Zoom ===== */
  --cluster-hover-shadow-zoom-out: none;
  --cluster-hover-shadow-zoom-in: none;
  
  --cluster-tooltip-bg: hsl(var(--color-base) 45% / 1);
  --cluster-tooltip-color: hsl(var(--color-base) 95% / 1);
  --cluster-tooltip-border: hsl(var(--color-base) 75% / 1) 2px solid;
  --cluster-tooltip-shadow: none;

  /* ===== Loading ===== */
  --loading-color: hsl(var(--color-base) 60% / 1);
  --loading-bg: hsl(var(--color-base) 9% / 1);

  /* ===== Title Pill Variables ===== */
  --title-pill-text-color: hsl(var(--color-base) 15% / 1);
  --title-pill-logo-filter: brightness(0.2) contrast(1.2);

  /* ===== Node text colors ===== */
  --node-name-text-color: #000000;  /* Color negro para nombres en tema claro */

  /* ===== UI Panel Variables ===== */
  --ui-panel-bg: hsl(var(--color-base) 95% / 1);
  --ui-panel-border: hsl(var(--color-base) 85% / 1);
  --ui-panel-text: hsl(var(--color-base) 5% / 1); /* Texto casi negro para tema claro */
  --ui-panel-text-muted: hsl(var(--color-base) 10% / 1); /* Texto muted más oscuro para tema claro */

  /* ===== UI Controls ===== */
  --ui-control-bg: hsl(var(--color-base) 95% / 1);
  --ui-control-bg-hover: hsl(var(--color-base) 90% / 1);
  --ui-control-bg-active: hsl(var(--color-base) 90% / 1);
  --ui-control-text: hsl(var(--color-base) 30% / 1);
  --ui-control-icon: hsl(var(--color-base) 30% / 1);
  --ui-control-border: hsl(var(--color-base) 85% / 1);
  --ui-control-border-hover: hsl(var(--color-base) 85% / 1);
  --ui-control-focus: hsl(var(--color-base) 92% / 1);
  --ui-control-placeholder: hsl(var(--color-base) 30% / 1);
  
  /* ===== Border Radius Variables ===== */
  --cluster-border-radius: 44px;
  --node-border-radius: 8px;

  /* ===== Shadow Variables ===== */
  --side-panel-shadow: -4px 0 8px rgba(0, 0, 0, 0.05);
  --topbar-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  
  /* ===== Transition Variables ===== */
  --transition-fast: 0.2s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;
  --transition-bounce: 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ===== PILL FLOTANTE DE TÍTULO Y LOGO ===== */
.floating-title-pill {
  position: fixed !important;
  top: 20px !important;
  left: 20px !important;
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-panel-border);
  border-radius: 50px;
  padding: 4px 28px 4px 16px;
  display: flex !important;
  align-items: center;
  gap: 12px;
  z-index: 9999 !important;
  backdrop-filter: blur(10px);
  box-shadow: var(--side-panel-shadow);
  max-width: 300px;
  min-height: 40px;
  /* Asegurar que el pill sea siempre visible */
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

.floating-title-pill:hover {
  box-shadow: var(--topbar-shadow);
  border-color: var(--ui-control-border-hover);
  background: var(--ui-control-bg-hover);
}

/* ===== PILL FLOTANTE DE FILTROS ===== */
.floating-filters-pill {
  position: fixed !important;
  top: 20px !important;
  left: 20px !important;
  margin-left: 500px !important; /* Equilibrado después del contador */
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-panel-border);
  border-radius: 50px;
  padding: 4px 16px; /* Mismo padding que el título */
  display: flex !important;
  align-items: center;
  gap: 12px;
  z-index: 9998 !important;
  backdrop-filter: blur(10px);
  box-shadow: var(--side-panel-shadow);
  max-width: 80vw;
  min-height: 40px; /* Misma altura que el título */
  transition: all var(--transition-normal);
  /* Asegurar que el pill sea siempre visible */
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}


.floating-filters-pill.collapsed {
  padding: 8px 12px;
  max-width: 120px;
  transition: all 0.3s ease-in-out;
}

.floating-filters-pill:not(.collapsed) {
  transition: all 0.3s ease-in-out;
}

.floating-filters-pill .filters-container {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  max-width: calc(80vw - 80px);
  transition: opacity 0.3s ease-in-out;
}

.floating-filters-pill .filter-wrapper {
  display: flex;
  align-items: center;
  min-width: 100px;
}

.floating-filters-pill .filter-select,
.floating-filters-pill .filter-search {
  background: var(--ui-control-bg);
  border: 1px solid var(--ui-control-border);
  border-radius: 20px;
  padding: 6px 12px;
  font-size: 12px;
  color: var(--ui-panel-text);
  min-width: 120px;
  max-width: 180px;
  transition: all var(--transition-fast);
}

/* Estilos específicos para el dropdown select */
.floating-filters-pill .filter-select {
  padding-right: 24px; /* Espacio para la flecha del dropdown */
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 8px center;
  background-repeat: no-repeat;
  background-size: 12px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

.floating-filters-pill .filter-select:focus,
.floating-filters-pill .filter-search:focus {
  outline: none;
  border-color: var(--ui-control-border-focus);
  box-shadow: 0 0 0 2px var(--ui-control-border-focus);
}

.floating-filters-pill .filter-range-container {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 100px;
}

.floating-filters-pill .filter-range {
  flex: 1;
  height: 4px;
  background: var(--ui-control-bg);
  border-radius: 2px;
  outline: none;
  -webkit-appearance: none;
}

.floating-filters-pill .filter-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  background: var(--ui-control-border-focus);
  border-radius: 50%;
  cursor: pointer;
}

.floating-filters-pill .filter-range-value {
  font-size: 11px;
  color: var(--ui-panel-text-secondary);
  min-width: 20px;
  text-align: center;
}

.floating-filters-pill .filter-clear-btn,
.floating-filters-pill .filter-toggle-btn {
  background: var(--ui-control-bg);
  border: 1px solid var(--ui-control-border);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast), opacity 0.3s ease-in-out;
  color: var(--ui-panel-text);
  flex-shrink: 0;
}

.floating-filters-pill .filter-clear-btn:hover,
.floating-filters-pill .filter-toggle-btn:hover {
  background: var(--ui-control-bg-hover);
  border-color: var(--ui-control-border-hover);
  transform: scale(1.05);
}

.floating-filters-pill .filter-clear-btn:active,
.floating-filters-pill .filter-toggle-btn:active {
  transform: scale(0.95);
}

/* ===== PILL FLOTANTE DE CONTADOR DE SECCIONES ===== */
.floating-sections-count-pill {
  position: fixed !important;
  top: 20px !important; /* Misma altura que el pill de título */
  left: 20px !important;
  margin-left: 340px !important; /* Equilibrado entre título y filtros */
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-panel-border);
  border-radius: 50px;
  padding: 4px 16px; /* Mismo padding que el título */
  display: flex !important;
  align-items: center;
  justify-content: center;
  z-index: 9997 !important;
  backdrop-filter: blur(10px);
  box-shadow: var(--side-panel-shadow);
  min-height: 40px; /* Misma altura que el título */
  transition: all var(--transition-normal);
  /* Asegurar que el pill sea siempre visible */
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  font-size: 14px;
  font-weight: 600;
  color: var(--ui-panel-text);
  white-space: nowrap;
}


.floating-title-pill .floating-logo {
  max-height: 32px;
  max-width: 120px;
  object-fit: contain;
  flex-shrink: 0;
  filter: var(--title-pill-logo-filter);
}

.floating-title-pill .floating-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--title-pill-text-color);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0;
  line-height: 1.2;
}


/* Dark theme adjustments for floating pill */
body.theme-dark .floating-title-pill {
  background: var(--ui-panel-bg);
  border-color: var(--ui-panel-border);
  color: var(--ui-panel-text);
}

/* Light theme adjustments for floating pill */
body.theme-light .floating-title-pill {
  background: var(--ui-panel-bg);
  border-color: var(--ui-panel-border);
  color: var(--ui-panel-text);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .floating-title-pill {
    top: 15px;
    left: 15px;
    padding: 6px 12px;
    max-width: 250px;
    min-height: 36px;
  }
  
  .floating-title-pill .floating-logo {
    max-height: 28px;
    max-width: 100px;
  }
  
  .floating-title-pill .floating-title {
    font-size: 13px;
  }


  .floating-filters-pill {
    top: 15px;
    margin-left: 450px !important; /* Equilibrado en tablet */
    padding: 6px 12px; /* Mismo padding que el título en tablet */
    max-width: 75vw;
    min-height: 36px; /* Misma altura que el título en tablet */
  }

  .floating-filters-pill .filters-container {
    max-width: calc(75vw - 60px);
  }

  .floating-filters-pill .filter-wrapper {
    min-width: 80px;
  }

  .floating-filters-pill .filter-select,
  .floating-filters-pill .filter-search {
    min-width: 100px;
    max-width: 140px;
    font-size: 11px;
    padding: 5px 10px;
  }

  .floating-filters-pill .filter-select {
    padding-right: 20px; /* Espacio para la flecha en tablet */
    background-position: right 6px center;
    background-size: 10px;
  }

  .floating-filters-pill .filter-clear-btn,
  .floating-filters-pill .filter-toggle-btn {
    width: 28px;
    height: 28px;
  }

  .floating-sections-count-pill {
    top: 15px; /* Misma altura que el pill de título en tablet */
    margin-left: 290px !important; /* Equilibrado en tablet */
    padding: 6px 12px; /* Mismo padding que el título en tablet */
    min-height: 36px; /* Misma altura que el título en tablet */
    font-size: 13px;
  }
}

@media (max-width: 480px) {
  .floating-title-pill {
    top: 10px;
    left: 10px;
    padding: 5px 10px;
    max-width: 200px;
    min-height: 32px;
  }
  
  .floating-title-pill .floating-logo {
    max-height: 24px;
    max-width: 80px;
  }
  
  .floating-title-pill .floating-title {
    font-size: 12px;
  }


  .floating-filters-pill {
    top: 10px;
    margin-left: 400px !important; /* Equilibrado en móvil */
    padding: 5px 8px; /* Mismo padding que el título en móvil */
    max-width: 70vw;
    min-height: 32px; /* Misma altura que el título en móvil */
  }

  .floating-filters-pill .filters-container {
    max-width: calc(70vw - 50px);
    gap: 4px;
  }

  .floating-filters-pill .filter-wrapper {
    min-width: 60px;
  }

  .floating-filters-pill .filter-select,
  .floating-filters-pill .filter-search {
    min-width: 80px;
    max-width: 120px;
    font-size: 10px;
    padding: 4px 8px;
  }

  .floating-filters-pill .filter-select {
    padding-right: 18px; /* Espacio para la flecha en móvil */
    background-position: right 5px center;
    background-size: 9px;
  }

  .floating-filters-pill .filter-clear-btn,
  .floating-filters-pill .filter-toggle-btn {
    width: 24px;
    height: 24px;
  }

  .floating-sections-count-pill {
    top: 10px; /* Misma altura que el pill de título en móvil */
    margin-left: 240px !important; /* Equilibrado en móvil */
    padding: 5px 10px; /* Mismo padding que el título en móvil */
    min-height: 32px; /* Misma altura que el título en móvil */
    font-size: 12px;
  }

}

/* ===== ESTILOS BASE ===== */
body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--app-bg);
  color: var(--text-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* ===== CONTENEDOR PRINCIPAL ===== */
#app {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
}

.xcanvas {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* ===== VISIBILIDAD INICIAL DEL DIAGRAMA ===== */
#diagram {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.8s ease-in-out, visibility 0.8s ease-in-out;
}

#diagram.loaded {
  opacity: 1;
  visibility: visible;
}

svg {
  width: 100%;
  height: 100%;
}

/* ===== NODOS DEL ÁRBOL ===== */
.node rect {
  fill: var(--node-fill);
  stroke: var(--node-stroke);
  stroke-width: 1px;
  rx: var(--node-border-radius);
  filter: drop-shadow(var(--node-shadow));
  transition: all 0.3s ease, fill 0.3s ease, stroke 0.3s ease, filter 0.3s ease, opacity 0.3s ease;
}

/* Transición suave para opacidad de nodos filtrados */
.node {
  transition: opacity 0.3s ease;
}

/* ===== HOVER DE NODOS ===== */

/* Hover de nodos por defecto */
.node:hover rect {
  fill: var(--node-fill-hover);
  stroke: var(--node-stroke-hover);
  stroke-width: 2px;
  filter: drop-shadow(var(--node-shadow-hover));
}

/* ===== SELECCIÓN DE NODOS ===== */
/* Nodo seleccionado usando variables CSS */
.node-selected rect {
  fill: var(--node-selection-selected) !important;
  stroke: var(--node-selection-focus) !important;
  stroke-width: var(--node-selection-border) !important;
  filter: drop-shadow(var(--node-shadow-focus)) !important;
}



/* ===== RECTS SVG BLOQUEADORES DE NODOS ===== */
.cluster-node-blocker {
  fill: transparent !important;
  stroke: none !important;
  pointer-events: all !important;
  cursor: pointer !important;
  /* Completamente invisible, pero pasa hover al cluster */
}

/* ===== HOVER SIMULADO PARA OVERLAY ===== */
/* Hover simulado usando las variables CSS existentes */
.cluster-bg.cluster-hover-simulated {
  fill: var(--cluster-hover-bg) !important;
  stroke: var(--cluster-hover-stroke) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow)) !important;
}

/* Hover simulado para zoom-out */
.cluster-bg.zoom-out.cluster-hover-simulated {
  fill: var(--cluster-hover-bg-zoom-out) !important;
  stroke: var(--cluster-hover-stroke-zoom-out) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow-zoom-out)) !important;
}

/* Hover simulado para zoom-in */
.cluster-bg.zoom-in.cluster-hover-simulated {
  fill: var(--cluster-hover-bg-zoom-in) !important;
  stroke: var(--cluster-hover-stroke-zoom-in) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow-zoom-in)) !important;
}

/* ===== SISTEMA DE FILTROS ===== */
.xdiagrams-filters {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: var(--ui-panel-bg, #ffffff);
  border-bottom: 1px solid var(--ui-panel-border, #e0e0e0);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  font-family: var(--ui-font-family, 'Arial, sans-serif');
  font-size: 14px;
  transition: all 0.3s ease;
  display: flex;
  justify-content: center;
}

/* Controles flotantes en la esquina superior derecha */
.xdiagrams-filters__floating-controls {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1001;
  display: flex;
  gap: 8px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 8px;
  padding: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.xdiagrams-filters__floating-controls .xdiagrams-filters__toggle,
.xdiagrams-filters__floating-controls .xdiagrams-filters__reset {
  background: none;
  border: none;
  border-radius: 6px;
  padding: 8px;
  cursor: pointer;
  color: var(--ui-panel-text, #333333);
  transition: all 0.2s ease;
  font-size: 16px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.xdiagrams-filters__floating-controls .xdiagrams-filters__toggle:hover,
.xdiagrams-filters__floating-controls .xdiagrams-filters__reset:hover {
  background: var(--ui-panel-hover-bg, #f0f0f0);
  transform: scale(1.05);
}

.xdiagrams-filters__floating-controls .xdiagrams-filters__toggle:active,
.xdiagrams-filters__floating-controls .xdiagrams-filters__reset:active {
  transform: scale(0.95);
}

/* Ajustar el contenido principal cuando hay filtros */
/* Usar JavaScript para ajustar dinámicamente el margen */

/* Estilos para el contenedor principal cuando tiene filtros */
#app {
  transition: margin-top 0.3s ease;
}

/* Asegurar que el contenido no se superponga con los filtros */
.xdiagrams-filters + * {
  margin-top: 40px;
}

/* Estilos para el contenedor del diagrama SVG */
.xdiagrams-container {
  transition: margin-top 0.3s ease;
}

/* Ajustar el viewport del SVG para que no se corte */
svg {
  max-width: 100%;
  height: auto;
}

.xdiagrams-filters--side {
  position: fixed;
  top: 0;
  right: 0;
  width: 300px;
  height: 100vh;
  border-left: 1px solid var(--ui-panel-border, #e0e0e0);
  border-bottom: none;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
}

/* Estilos del header eliminados - ahora usamos controles flotantes */

.xdiagrams-filters__content {
  padding: 16px;
  max-height: 200px;
  overflow-y: auto;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  max-width: 1200px;
}

.xdiagrams-filters--side .xdiagrams-filters__content {
  max-height: calc(100vh - 60px);
}

.xdiagrams-filters--expanded .xdiagrams-filters__content {
  display: block !important;
}

.xdiagrams-filters__list {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  align-items: center;
  justify-content: center;
  max-width: 100%;
  width: fit-content;
}

.xdiagrams-filters--side .xdiagrams-filters__list {
  flex-direction: column;
  flex-wrap: nowrap;
  align-items: stretch;
}

.xdiagrams-filter {
  display: flex;
  flex-direction: column;
  gap: 0;
  min-width: 150px;
}

.xdiagrams-filters--side .xdiagrams-filter {
  min-width: auto;
}

.xdiagrams-filter__select,
.xdiagrams-filter__input {
  padding: 8px 12px;
  border: 1px solid var(--ui-panel-border, #e0e0e0);
  border-radius: 4px;
  font-size: 14px;
  background: var(--ui-panel-bg, #ffffff);
  color: var(--ui-panel-text, #333333);
  transition: border-color 0.2s ease;
}

.xdiagrams-filter__select:focus,
.xdiagrams-filter__input:focus {
  outline: none;
  border-color: var(--ui-panel-focus-border, #007bff);
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
}

.xdiagrams-filter__range {
  display: flex;
  align-items: center;
  gap: 8px;
}

.xdiagrams-filter__range-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--ui-panel-border, #e0e0e0);
  border-radius: 4px;
  font-size: 14px;
  background: var(--ui-panel-bg, #ffffff);
  color: var(--ui-panel-text, #333333);
}

.xdiagrams-filter__range-separator {
  color: var(--ui-panel-text-secondary, #666666);
  font-weight: 500;
}

.xdiagrams-filter__multiselect {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 120px;
  overflow-y: auto;
  border: 1px solid var(--ui-panel-border, #e0e0e0);
  border-radius: 4px;
  padding: 8px;
  background: var(--ui-panel-bg, #ffffff);
}

.xdiagrams-filter__multiselect-header {
  font-size: 12px;
  font-weight: 600;
  color: var(--ui-panel-text-secondary, #666666);
  padding-bottom: 4px;
  border-bottom: 1px solid var(--ui-panel-border, #e0e0e0);
  margin-bottom: 4px;
}

.xdiagrams-filter__checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 13px;
}

.xdiagrams-filter__checkbox input[type="checkbox"] {
  margin: 0;
}

.xdiagrams-filter__checkbox-label {
  color: var(--ui-panel-text, #333333);
}

.xdiagrams-filters__stats {
  display: flex;
  align-items: center;
  background: var(--ui-panel-bg, #ffffff);
  border: 1px solid var(--ui-panel-border, #e0e0e0);
  border-radius: 6px;
  padding: 8px 12px;
  margin-right: 8px;
  min-width: fit-content;
}

.xdiagrams-filters__count {
  font-size: 12px;
  color: var(--ui-panel-text-secondary, #666666);
  font-weight: 600;
  white-space: nowrap;
}

.xdiagrams-filters__more {
  background: var(--ui-panel-bg, #ffffff);
  border: 1px solid var(--ui-panel-border, #e0e0e0);
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  color: var(--ui-panel-text, #333333);
  font-size: 12px;
  transition: all 0.2s ease;
  margin-top: 8px;
}

.xdiagrams-filters__more:hover {
  background: var(--ui-panel-hover-bg, #f0f0f0);
  border-color: var(--ui-panel-hover-border, #d0d0d0);
}

/* Responsive */
@media (max-width: 768px) {
  .xdiagrams-filters {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
  }
  
  .xdiagrams-filters__list {
    flex-direction: column;
    gap: 12px;
    align-items: center;
    justify-content: center;
  }
  
  .xdiagrams-filter {
    min-width: auto;
  }
  
  /* Ajustar el contador en móviles */
  .xdiagrams-filters__stats {
    margin-right: 0;
    margin-bottom: 8px;
    align-self: center;
  }
  
  .xdiagrams-filters__content {
    max-height: 300px;
  }
  
  /* Ajustar controles flotantes en móviles */
  .xdiagrams-filters__floating-controls {
    top: 10px;
    right: 10px;
    padding: 6px;
    gap: 6px;
  }
  
  .xdiagrams-filters__floating-controls .xdiagrams-filters__toggle,
  .xdiagrams-filters__floating-controls .xdiagrams-filters__reset {
    width: 32px;
    height: 32px;
    font-size: 14px;
  }
}

.node:focus rect {
  fill: var(--node-selection-selected);
  stroke: var(--node-selection-focus);
  stroke-width: var(--node-selection-border);
  filter: drop-shadow(var(--node-shadow-focus));
}

/* ===== THUMBNAILS EMBEBIDOS ===== */
/* Estados focus para thumbnails embebidos */
.node:focus .embedded-thumbnail *,
.node.node-selected .embedded-thumbnail * {
  fill: var(--thumb-fill-focus, var(--thumb-fill-hover, var(--thumb-fill, var(--text-color)))) !important;
}

/* Reglas específicas para prevenir herencia de estilos del nodo */
.node .embedded-thumbnail,
.node.node-selected .embedded-thumbnail {
  stroke: var(--thumb-stroke, transparent) !important;
  stroke-width: 0px !important;
  outline: none !important;
  box-shadow: none !important;
  background: transparent !important;
  transition: opacity 0.2s ease, transform 0.2s ease, filter 0.2s ease;
  animation: none !important;
}

/* Prevenir efectos hover del nodo en thumbnails embebidos */
.node:hover .embedded-thumbnail {
  stroke: var(--thumb-stroke, transparent) !important;
  stroke-width: 0px !important;
  outline: none !important;
  box-shadow: none !important;
  transition: opacity 0.2s ease, transform 0.2s ease, filter 0.2s ease;
  animation: none !important;
}

/* Prevenir efectos de selección del nodo en thumbnails embebidos */
.node.node-selected .embedded-thumbnail,
.node.node-selected .embedded-thumbnail *,
.node.node-selected .embedded-thumbnail rect,
.node.node-selected .embedded-thumbnail path,
.node.node-selected .embedded-thumbnail circle,
.node.node-selected .embedded-thumbnail polygon {
  stroke: var(--thumb-stroke, transparent) !important;
  stroke-width: 0px !important;
  outline: none !important;
  box-shadow: none !important;
  animation: none !important;
  filter: var(--thumb-filter, none) !important;
}

/* Reglas adicionales para prevenir efectos de selección específicos */
.node.node-selected .embedded-thumbnail {
  /* Prevenir cualquier efecto de drop-shadow del nodo seleccionado */
  filter: var(--thumb-filter, none) !important;
  /* Prevenir cualquier transformación del nodo seleccionado */
  transform: scale(1.0) rotate(0deg) !important;
  /* Prevenir cualquier z-index del nodo seleccionado */
  z-index: auto !important;
  /* Prevenir cualquier posición absoluta del nodo seleccionado */
  position: static !important;
}

/* Prevenir efectos de pulse animation en thumbnails embebidos */
.node.node-selected .embedded-thumbnail,
.node.node-selected .embedded-thumbnail * {
  animation: none !important;
  animation-name: none !important;
  animation-duration: 0s !important;
  animation-iteration-count: 0 !important;
}

/* Prevenir efectos de drop-shadow del nodo seleccionado en thumbnails */
.node.node-selected .embedded-thumbnail {
  filter: var(--thumb-filter, none) !important;
}

/* Reglas con máxima especificidad para thumbnails embebidos en nodos seleccionados */
svg .node.node-selected .embedded-thumbnail,
.node.node-selected .embedded-thumbnail {
  filter: var(--thumb-filter, none) !important;
  stroke: var(--thumb-stroke, transparent) !important;
  stroke-width: 0px !important;
  outline: none !important;
  box-shadow: none !important;
}

/* ===== ICONOS DE FUENTE EMBEBIDOS ===== */
/* Estilos base para iconos de fuente embebidos */
.node .embedded-thumbnail[font-family="xdiagrams-icons"] {
  fill: var(--thumb-fill, var(--text-color)) !important;
  transition: fill 0.2s ease !important;
}

/* Hover para iconos de fuente embebidos */
.node:hover .embedded-thumbnail[font-family="xdiagrams-icons"] {
  fill: var(--thumb-fill-hover, var(--thumb-fill, var(--text-color))) !important;
}

/* Focus/Selección para iconos de fuente embebidos */
.node:focus .embedded-thumbnail[font-family="xdiagrams-icons"],
.node.node-selected .embedded-thumbnail[font-family="xdiagrams-icons"] {
  fill: var(--thumb-fill-focus, var(--thumb-fill-hover, var(--thumb-fill, var(--text-color)))) !important;
}

/* ===== TEXTOS DE NODOS ===== */
.label-text {
  font-size: 12px;
  fill: var(--node-name-text-color, var(--node-text, var(--text-color)));
  text-anchor: middle;
  dominant-baseline: middle;
  transition: fill 0.3s ease;
}

/* Hover para textos de nodos */
.node:hover .label-text {
  fill: var(--node-text-hover, var(--node-text, var(--text-color))) !important;
}

/* Focus/Selección para textos de nodos */
.node:focus .label-text,
.node.node-selected .label-text {
  fill: var(--node-text-focus, var(--node-text-hover, var(--node-text, var(--text-color)))) !important;
}

.label-id {
  font-size: 10px;
  fill: var(--node-text-secondary);
  text-anchor: middle;
  dominant-baseline: middle;
  transition: fill 0.3s ease;
}

/* Hover para IDs de nodos */
.node:hover .label-id {
  fill: var(--node-text-hover, var(--node-text-secondary)) !important;
}

/* Focus/Selección para IDs de nodos */
.node:focus .label-id,
.node.node-selected .label-id {
  fill: var(--node-text-focus, var(--node-text-hover, var(--node-text-secondary))) !important;
}

/* ===== TEXTO SECUNDARIO CUANDO CLUSTER ESTÁ SELECCIONADO ===== */
/* Cuando el cluster está seleccionado, cambiar el color del texto secundario */
.cluster-bg:focus ~ .tree-content .label-id,
.cluster-bg.cluster-focused ~ .tree-content .label-id {
  fill: var(--node-text-secondary-focus, var(--node-text-secondary)) !important;
}

.cluster-bg:focus ~ .tree-content .node-id-label,
.cluster-bg.cluster-focused ~ .tree-content .node-id-label {
  fill: var(--node-text-secondary-focus, var(--node-text-secondary)) !important;
}

/* ===== TEXTO INTELIGENTE (smart-text) ===== */
/* Estilos base para texto inteligente */
.smart-text {
  fill: var(--node-name-text-color, var(--node-text, var(--text-color))) !important;
  text-anchor: middle;
  dominant-baseline: middle;
  transition: fill 0.3s ease !important;
}

/* Hover para texto inteligente */
.node:hover .smart-text {
  fill: var(--node-text-hover, var(--node-text, var(--text-color))) !important;
}

/* Focus/Selección para texto inteligente */
.node:focus .smart-text,
.node.node-selected .smart-text {
  fill: var(--node-text-focus, var(--node-text-hover, var(--node-text, var(--text-color)))) !important;
}

.node-id-label {
  font-size: 5px;
  font-weight: normal;
  fill: var(--node-text-secondary, #666);
  text-anchor: end;
  dominant-baseline: middle;
  transition: fill 0.3s ease;
}

/* Hover para node-id-label */
.node:hover .node-id-label {
  fill: var(--node-text-hover, var(--node-text-secondary, #666)) !important;
}

/* Focus/Selección para node-id-label */
.node:focus .node-id-label,
.node.node-selected .node-id-label {
  fill: var(--node-text-focus, var(--node-text-hover, var(--node-text-secondary, #666))) !important;
}

/* ===== CLUSTERS ===== */
.cluster-title-container {
  transform-origin: top left;
  transform: translate(64px, 34px); /* Solo posicionar desde el borde */
}

.cluster-title-bg {
  fill: var(--cluster-title-bg);
  stroke: var(--cluster-title-bg-border);
  stroke-width: 2px; /* Duplicado de 1px a 2px */
  rx: 32px; /* Duplicado de 16px a 32px */
  ry: 32px; /* Duplicado de 16px a 32px */
  /* Las dimensiones se calculan dinámicamente en JavaScript */
  transform-origin: top left;
}

.cluster-title {
  font-size: 96px; /* Duplicado de 48px a 96px */
  font-weight: bold;
  font-family: Arial, Helvetica, sans-serif; /* Fuente web-safe consistente en Mac y Windows */
  fill: var(--cluster-title-color);
  /* Usar text-anchor start como en la referencia */
  text-anchor: start;
  transition: fill 0.3s ease;
}



.cluster-title:hover {
  fill: #f8f8f8;
}

.cluster-bg {
  fill: var(--cluster-bg);
  stroke: var(--cluster-stroke);
  stroke-width: 3px;
  rx: var(--cluster-border-radius) !important;
  opacity: 0.95;
  transition: fill var(--transition-normal), 
              stroke var(--transition-normal), 
              stroke-width var(--transition-normal),
              filter var(--transition-normal);
  filter: drop-shadow(none);
}

/* Hover solo se aplica cuando NO está seleccionado/focused */
.cluster-bg:hover:not(.cluster-focused):not(:focus) {
  fill: var(--cluster-hover-bg) !important;
  stroke: var(--cluster-hover-stroke) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow)) !important;
}

/* ===== HOVER POR NIVEL DE ZOOM ===== */
/* Zoom <= 10% (vista general) - Color naranja */
.cluster-bg.zoom-out:hover:not(.cluster-focused):not(:focus) {
  fill: var(--cluster-hover-bg-zoom-out) !important;
  stroke: var(--cluster-hover-stroke-zoom-out) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow-zoom-out)) !important;
}

/* Zoom > 10% (vista detallada) - Color verde */
.cluster-bg.zoom-in:hover:not(.cluster-focused):not(:focus) {
  fill: var(--cluster-hover-bg-zoom-in) !important;
  stroke: var(--cluster-hover-stroke-zoom-in) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-hover-shadow-zoom-in)) !important;
}

/* Regla más específica para asegurar que se aplique */
svg .cluster-bg:hover:not(.cluster-focused):not(:focus),
#diagram .cluster-bg:hover:not(.cluster-focused):not(:focus),
.cluster-container .cluster-bg:hover:not(.cluster-focused):not(:focus) {
  stroke: var(--cluster-hover-stroke) !important;
}

/* Reglas específicas para zoom */
svg .cluster-bg.zoom-out:hover:not(.cluster-focused):not(:focus),
#diagram .cluster-bg.zoom-out:hover:not(.cluster-focused):not(:focus),
.cluster-container .cluster-bg.zoom-out:hover:not(.cluster-focused):not(:focus) {
  stroke: var(--cluster-hover-stroke-zoom-out) !important;
}

svg .cluster-bg.zoom-in:hover:not(.cluster-focused):not(:focus),
#diagram .cluster-bg.zoom-in:hover:not(.cluster-focused):not(:focus),
.cluster-container .cluster-bg.zoom-in:hover:not(.cluster-focused):not(:focus) {
  stroke: var(--cluster-hover-stroke-zoom-in) !important;
}

.cluster-bg:focus,
.cluster-bg.cluster-focused {
  outline: none;
  fill: var(--cluster-selected-bg);
  stroke: var(--cluster-selected-stroke) !important;
  stroke-width: 4px !important;
  filter: drop-shadow(var(--cluster-selected-shadow));
  transition: fill var(--transition-normal), 
              stroke var(--transition-normal), 
              stroke-width var(--transition-normal),
              filter var(--transition-normal);
}

.cluster-container {
  overflow: hidden;
}

/* ===== TEXTO GRANDE DE CLUSTER EN HOVER ===== */
/* Base de fondo para el texto grande */
.cluster-hover-title-large-bg {
  fill: var(--cluster-hover-title-large-bg-color);
  stroke: var(--cluster-hover-title-large-border-color);
  stroke-width: var(--cluster-hover-title-large-border-width);
  opacity: 0; /* Oculto por defecto */
  pointer-events: none;
}

/* Contenedor para el texto grande que aparece en hover */
.cluster-hover-title-large {
  font-size: var(--cluster-hover-title-large-font-size);
  font-weight: var(--cluster-hover-title-large-font-weight);
  font-family: var(--cluster-hover-title-large-font-family);
  fill: var(--cluster-hover-title-large-color);
  text-anchor: start; /* Mismo anchor que el título original */
  dominant-baseline: middle;
  opacity: 0; /* Oculto por defecto */
  pointer-events: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Estilos base para el texto grande - controlado por JavaScript */
.cluster-hover-title-large {
  fill: var(--cluster-hover-title-large-color);
  font-size: var(--cluster-hover-title-large-font-size);
}

/* Efecto hover adicional para el texto grande */
.cluster:hover .cluster-hover-title-large:hover {
  fill: #f8f8f8; /* Mismo color que el título original en hover */
}



/* ===== PANEL DE INFORMACIÓN ===== */
.info-panel {
  position: fixed;
  top: 15px;
  right: 15px;
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-panel-border);
  border-radius: var(--ui-control-border-radius);
  padding: 15px 25px 15px 15px; /* Padding derecho aumentado de 15px a 25px */
  font-family: monospace;
  font-size: 11px;
  z-index: 1000;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.1); /* Sombra aumentada */
  min-width: 150px;
  backdrop-filter: blur(5px);
}

.info-panel h3 {
  margin: 0 0 8px 0;
  font-size: 12px;
  color: var(--ui-panel-text);
  font-weight: normal;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.info-item {
  margin: 5px 0;
  color: var(--ui-panel-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Asegurar que todos los elementos dentro del info panel se trunquen */
.info-panel * {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Estilos específicos para enlaces y URLs en el info panel */
.info-panel a,
.info-panel .url,
.info-panel [href] {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
  max-width: 100%;
}

/* ===== LÍNEAS DE CONEXIÓN ===== */
.link {
  fill: none;
  stroke: var(--node-connector);
  stroke-width: 4px;
  transition: stroke 0.3s ease;
}

/* Links cuando el cluster está enfocado/seleccionado */
.cluster-bg:focus ~ .tree-content .link,
.cluster-bg.cluster-focused ~ .tree-content .link {
  stroke: var(--node-connector);
  stroke-width: 5px;
}

/* ===== ESTILOS DE ICONOS ===== */
/* Iconos de fuente icomoon */
text[font-family="icomoon"] {
  fill: var(--ui-control-icon);
  opacity: 1;
  text-anchor: middle;
  dominant-baseline: middle;
  transition: fill 0.3s ease;
}

/* ===== ÍCONOS MATERIAL DESIGN ===== */
.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 48px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
  fill: var(--ui-control-icon);
  opacity: 1;
  text-anchor: middle;
  transition: fill 0.3s ease;
}

/* ===== PANEL DE CONTROLES (OPCIONAL) ===== */
.controls {
  position: fixed;
  top: 15px;
  left: 15px;
  background: var(--ui-control-bg);
  border: 1px solid var(--ui-control-border);
  border-radius: var(--ui-control-border-radius);
  padding: var(--ui-control-padding);
  font-family: monospace;
  font-size: 12px;
  z-index: 1000;
  box-shadow: var(--side-panel-shadow);
  backdrop-filter: blur(5px);
  color: var(--ui-control-text);
}

.controls h3 {
  margin: 0 0 10px 0;
  font-size: 14px;
  color: var(--ui-control-text);
}

.controls label {
  display: block;
  margin: 8px 0 4px 0;
  color: var(--ui-panel-text-muted);
}

.controls input, 
.controls select {
  width: 100%;
  padding: 4px;
  border: 1px solid var(--ui-control-border);
  border-radius: var(--ui-control-border-radius);
  background: var(--ui-control-bg);
  color: var(--ui-control-text);
  font-size: 11px;
  transition: all 0.3s ease;
}

.controls input:focus,
.controls select:focus {
  border-color: var(--ui-control-border-focus);
  box-shadow: 0 0 0 2px var(--ui-control-shadow-focus);
  outline: none;
}

.controls button {
  margin-top: 10px;
  padding: var(--ui-control-btn-padding);
  background: var(--ui-control-bg-active);
  border: none;
  border-radius: var(--ui-control-btn-border-radius);
  color: var(--ui-control-text);
  cursor: pointer;
  font-size: 11px;
  transition: all 0.3s ease;
}

.controls button:hover {
  background: var(--ui-control-bg-hover);
}



/* Tema Personalizado - Verde Naturaleza */
.diagram-theme-nature {
  --diagram-bg: #1a472a;
  --diagram-text: #e8f5e8;
  --diagram-text-secondary: #b8d4b8;
  
  --cluster-bg: #2d5a3d;
  --cluster-border: #4a7c59;
  --cluster-title: #e8f5e8;
  --cluster-hover-bg: #4a7c59;
  --cluster-hover-border: #6bbf7b;
  --cluster-focus-bg: #6bbf7b;
  --cluster-focus-border: #4a7c59;
  
  --node-bg: #2d5a3d;
  --node-border: #4a7c59;
  --node-hover-border: #6bbf7b;
  
  --text-primary: #e8f5e8;
  --text-secondary: #b8d4b8;
  --text-muted: #8fb38f;
  
  --icon-color: #b8d4b8;
  --icon-opacity: 1;
  --link-color: #4a7c59;
  --link-color-focused: #e8f5e8;
  
  --panel-bg: rgba(45, 90, 61, 0.95);
  --panel-border: #4a7c59;
  --panel-text: #e8f5e8;
  --panel-text-secondary: #b8d4b8;
  
  --control-bg: rgba(45, 90, 61, 0.95);
  --control-border: #4a7c59;
  --control-input-bg: #2d5a3d;
  --control-input-border: #4a7c59;
  --control-button-bg: #6bbf7b;
  --control-button-hover: #4a7c59;
  
  --cluster-shadow: 0 4px 8px rgba(107, 191, 123, 0.3);
  --cluster-focus-shadow: 0 4px 12px rgba(107, 191, 123, 0.5);
}

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
  .info-panel {
    top: 10px;
    right: 10px;
    padding: 8px;
    font-size: 10px;
    min-width: 120px;
  }
  
  .controls {
    top: 10px;
    left: 10px;
    padding: 10px;
    font-size: 11px;
  }
  
  .cluster-title {
    font-size: 16px;
  }
  
  .material-icons {
    font-size: 36px;
  }
  
  .label-text {
    font-size: 10px;
  }
  
  .label-id {
    font-size: 8px;
  }
}

@media (max-width: 480px) {
  .info-panel {
    position: relative;
    top: auto;
    right: auto;
    margin: 10px;
    width: calc(100% - 20px);
    min-width: auto;
  }
  
  .controls {
    position: relative;
    top: auto;
    left: auto;
    margin: 10px;
    width: calc(100% - 20px);
  }
  
  #app {
    height: calc(100vh - 200px);
  }
  
  .xcanvas {
    height: calc(100vh - 200px);
  }
}

/* ===== ANIMACIONES ===== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.cluster {
  animation: fadeIn 0.5s ease-out;
}

/* ===== ESTADOS DE CARGA ===== */
.diagram-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: monospace;
  color: var(--loading-color);
  background: var(--loading-bg);
  padding: 20px;
  border-radius: var(--ui-control-border-radius);
  box-shadow: var(--side-panel-shadow);
}

.diagram-loading::after {
  content: "Cargando diagrama...";
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* ===== ESTADOS DE ERROR ===== */
.diagram-error {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: var(--font-family);
  color: var(--error-message-color);
  text-align: center;
  padding: 20px;
  background: var(--ui-panel-bg);
  border-radius: var(--ui-control-border-radius);
  box-shadow: var(--side-panel-shadow);
  opacity: 0.5;
  font-size: 14px;
  font-weight: 400;
}

.diagram-error::before {
  content: "No se pudo cargar el diagrama";
  display: block;
  margin-bottom: 10px;
  font-size: 12px;
  opacity: 0.7;
}

/* ===== ERROR DIALOG ===== */
.xdiagrams-error-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--ui-panel-bg);
  color: var(--text-color);
  padding: 20px;
  border-radius: var(--ui-control-border-radius);
  font-family: var(--font-family);
  font-size: 14px;
  max-width: 500px;
  z-index: 10000;
  box-shadow: var(--side-panel-shadow);
  text-align: center;
  border: 1px solid var(--ui-control-border);
  opacity: 0.9;
}

.xdiagrams-error-title {
  margin: 0 0 15px 0;
  font-size: 16px;
  font-weight: 500;
  color: var(--text-color);
  opacity: 0.8;
}

.xdiagrams-error-message {
  margin: 0 0 15px 0;
  line-height: 1.4;
  color: var(--text-color);
  opacity: 0.7;
  font-size: 13px;
}

.xdiagrams-error-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 20px;
}

.xdiagrams-error-retry-btn {
  background: var(--ui-control-bg);
  color: var(--text-color);
  border: 1px solid var(--ui-control-border);
  padding: 8px 16px;
  border-radius: var(--ui-control-border-radius);
  cursor: pointer;
  font-size: 14px;
  font-family: var(--font-family);
  transition: all 0.2s ease;
}

.xdiagrams-error-retry-btn:hover {
  background: var(--ui-control-bg-hover);
  border-color: var(--ui-control-border-hover);
}

.xdiagrams-error-close-btn {
  background: transparent;
  color: var(--text-color);
  border: 1px solid var(--ui-control-border);
  padding: 8px 16px;
  border-radius: var(--ui-control-border-radius);
  cursor: pointer;
  font-size: 14px;
  font-family: var(--font-family);
  transition: all 0.2s ease;
  opacity: 0.7;
}

.xdiagrams-error-close-btn:hover {
  opacity: 1;
  background: var(--ui-control-bg-hover);
}

/* ===== UTILIDADES ===== */
.diagram-hidden {
  display: none !important;
}

.diagram-visible {
  display: block !important;
}

.diagram-fade-in {
  opacity: 0;
  animation: fadeIn 0.3s ease-out forwards;
}

.diagram-fade-out {
  opacity: 1;
  animation: fadeOut 0.3s ease-out forwards;
}

@keyframes fadeOut {
  to {
    opacity: 0;
  }
}

/* ===== ACCESIBILIDAD ===== */
@media (prefers-reduced-motion: reduce) {
  .cluster-bg,
  .cluster-title,
  .cluster {
    transition: none;
    animation: none;
  }
}

/* ===== IMPRESIÓN ===== */
@media print {
  .info-panel,
  .controls {
    display: none !important;
  }
  
  .xcanvas {
    height: auto;
    overflow: visible;
  }
  
  svg {
    max-width: 100%;
    height: auto;
  }
} 

/* Controles de Zoom */
.zoom-controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-control-border);
  border-radius: 50px;
  padding: 8px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  z-index: 1000;
  backdrop-filter: blur(10px);
  box-shadow: var(--side-panel-shadow);
  transition: all 0.3s ease;
  min-width: 140px;
  justify-content: center;
}

.zoom-controls:hover {
  box-shadow: var(--topbar-shadow);
}

.zoom-input-container {
  position: relative;
  display: inline-block;
}

.zoom-input {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  color: var(--ui-control-text);
  font-size: 12px;
  font-weight: bold;
  text-align: center;
  width: 60px;
  height: 28px;
  padding: 4px 8px;
  padding-right: 28px;
  outline: none;
  transition: all 0.2s ease;
}

.zoom-percent-inline {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--ui-control-text);
  font-size: 11px;
  font-weight: bold;
  pointer-events: none;
  user-select: none;
}

.zoom-input:focus {
  background: rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
}

.zoom-input::placeholder {
  color: var(--ui-control-placeholder);
}

.zoom-btn {
  background: rgba(0, 0, 0, 0.3);
  border: none;
  border-radius: 50%;
  color: var(--ui-control-text);
  font-size: 14px;
  font-weight: bold;
  width: 28px;
  height: 28px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  user-select: none;
}

.zoom-btn:hover {
  background: rgba(0, 0, 0, 0.5);
  transform: scale(1.05);
}

.zoom-btn:active {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(0.95);
}

.zoom-btn:disabled {
  background: var(--ui-control-bg);
  opacity: var(--ui-control-btn-opacity-disabled);
  cursor: not-allowed;
  transform: none;
}



/* Responsive para móviles */
@media (max-width: 768px) {
  .zoom-controls {
    bottom: 15px;
    right: 15px;
    padding: 6px 12px;
    gap: 6px;
    min-width: 120px;
  }
  
  .zoom-input {
    width: 50px;
    height: 26px;
    font-size: 11px;
    padding-right: 26px;
  }
  
  .zoom-percent-inline {
    font-size: 10px;
    right: 14px;
  }
  
  .zoom-btn {
    width: 26px;
    height: 26px;
    font-size: 12px;
  }
  

} 

/* ===== BOTÓN TOGGLE DE TEMA ===== */
.theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--theme-toggle-size, 40px);
  height: var(--theme-toggle-size, 40px);
  border: 1px solid var(--ui-control-border);
  border-radius: var(--theme-toggle-border-radius, 50%);
  background: var(--ui-control-bg);
  color: var(--ui-control-text);
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  margin: 0;
  padding: 0;
  line-height: 1;
  outline: none;
  box-shadow: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.theme-toggle:hover {
  background: var(--ui-control-bg-hover);
  color: var(--ui-control-text);
  transform: scale(1.05);
}

.theme-toggle:active {
  transform: scale(0.95);
}

.theme-toggle:focus {
  outline: none;
  border-color: var(--ui-control-border-focus);
  box-shadow: 0 0 0 2px var(--ui-control-shadow-focus);
}

/* Iconos del tema */
.theme-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  transition: all 0.3s ease;
  margin: 0;
  padding: 0;
  line-height: 1;
  width: var(--theme-icon-size, 18px);
  height: var(--theme-icon-size, 18px);
}

.sun-icon {
  opacity: 1;
  transform: translate(-50%, -50%) rotate(0deg);
}

.moon-icon {
  opacity: 0;
  transform: translate(-50%, -50%) rotate(90deg);
}

/* Modo oscuro - mostrar icono de luna */
.theme-toggle.dark-mode .sun-icon {
  opacity: 0;
  transform: translate(-50%, -50%) rotate(-90deg);
}

.theme-toggle.dark-mode .moon-icon {
  opacity: 1;
  transform: translate(-50%, -50%) rotate(0deg);
}

/* Contenedor de controles de tema */
.theme-controls {
  display: flex;
  align-items: center;
  gap: var(--ui-control-gap, 10px);
  margin: 0;
  padding: 0;
  line-height: 1;
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
}

/* Responsive para móviles */
@media (max-width: 768px) {
  .theme-toggle {
    width: 36px;
    height: 36px;
  }
  
  .theme-icon {
    width: 16px;
    height: 16px;
  }
}

@media (max-width: 480px) {
  .theme-toggle {
    width: 32px;
    height: 32px;
  }
  
  .theme-icon {
    width: 14px;
    height: 14px;
  }
}

/* ===== SIDE PANEL STYLES ===== */
.side-panel { 
  position: fixed !important; 
  top: 0 !important; 
  right: 0 !important; 
  left: auto !important;
  width: 360px; 
  height: 100%;
  background: var(--ui-panel-bg); 
  color: var(--ui-panel-text); 
  box-shadow: var(--side-panel-shadow);
  z-index: 10050; 
  transform: translateX(100%); 
  transition: transform var(--transition-normal);
}

.side-panel.open { 
  transform: translateX(0) !important; 
}

.side-panel-header { 
  display: flex; 
  align-items: center; 
  justify-content: space-between;
  padding: 28px 20px 24px; 
  border-bottom: 1px solid var(--ui-panel-border); 
}

.side-panel-title { 
  margin: 0; 
  font-size: 18px; 
  font-weight: 600; 
  display: flex; 
  gap: 16px; 
  align-items: flex-start; 
  flex: 1;
  min-width: 0;
  position: relative;
  padding-left: 10px;
}

.side-panel-title-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  min-width: 0;
}

.side-panel-title-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.side-panel-title-id {
  font-size: 11px;
  color: var(--ui-panel-text-muted);
  font-weight: normal;
  opacity: 0.8;
}

.side-panel-title-thumbnail {
  width: 36px;
  height: 36px;
  object-fit: contain;
  flex-shrink: 0;
  border-radius: 8px;
  background: var(--ui-control-bg);
  border: 1px solid var(--ui-control-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.side-panel-content {
  padding: 28px;
  overflow-y: auto;
  height: calc(100% - 200px);
}

.side-panel-field {
  margin-bottom: 16px;
  display: flex;
  flex-direction: row;
  gap: 12px;
  align-items: flex-start; 
}

.side-panel-label { 
  color: var(--ui-panel-text-muted); 
  font-size: 12px; 
  min-width: 80px;
  flex-shrink: 0;
  font-weight: 500;
  opacity: 0.5;
}

.side-panel-value { 
  color: var(--ui-panel-text); 
  font-size: 12px; 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  cursor: text;
  position: relative;
}

/* Optimizar tooltips nativos */
.side-panel-value[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  z-index: 10000;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.1s ease;
}

.side-panel-value[title]:hover:hover::after {
  opacity: 1;
}

.side-panel-value.empty { 
  opacity: .5; 
  font-style: italic; 
}

.empty-dash {
  opacity: 0.9;
  color: var(--ui-panel-text-muted);
}

.side-panel-url-link {
  color: var(--ui-focus);
  text-decoration: none;
  transition: color var(--transition-fast);
}

.side-panel-url-link:hover {
  text-decoration: underline;
}

.side-panel-url-section {
  padding: 16px 20px;
  border-bottom: 1px solid var(--ui-panel-border);
  background: var(--ui-panel-bg);
}

.side-panel-url-input-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.side-panel-url-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--ui-panel-border);
  border-radius: 4px;
  background: var(--ui-panel-bg);
  color: var(--ui-panel-text-muted);
  font-size: 10px;
  font-family: monospace;
  outline: none;
  transition: border-color var(--transition-fast);
  opacity: 0.7;
}

.side-panel-url-input:focus {
  opacity: 1;
}

.side-panel-url-input:read-only {
  background: var(--ui-panel-bg-muted);
  color: var(--ui-panel-text-muted);
  cursor: default;
}

.side-panel-url-button {
  background: hsl(var(--color-base) 15% / 1);
  border: none;
  border-radius: 50%;
  color: var(--ui-panel-text);
  font-size: 14px;
  font-weight: bold;
  width: 28px;
  height: 28px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  user-select: none;
}

.side-panel-url-button:hover {
  background: hsl(var(--color-base) 10% / 1);
  transform: scale(1.05);
}

.side-panel-url-button:active {
  background: hsl(var(--color-base) 10% / 1);
  transform: scale(0.95);
}

.side-panel-url-button-icon {
  width: 14px;
  height: 14px;
  color: currentColor;
  display: block;
}

.side-panel-collapse-btn {
  position: absolute;
  top: 0;
  right: 0;
  width: 32px;
  height: 32px;
  background: var(--ui-panel-bg);
  border: 1px solid var(--ui-panel-border);
  border-radius: 0 0 0 var(--ui-control-border-radius);
  color: var(--ui-panel-text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 10051;
  font-size: 16px;
  font-weight: 300;
  line-height: 1;
}

.side-panel-collapse-btn::before {
  content: "×";
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  transform: scale(1);
  opacity: 0.7;
}

.side-panel-collapse-btn:hover {
  background: var(--ui-control-bg-hover);
  color: var(--ui-panel-text);
}

.side-panel-collapse-btn:active {
  transform: scale(0.95);
}

/* ===== ICONOS DEL SIDE PANEL ===== */
.side-panel-title-thumbnail .document:before {
  content: "\\e901";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .form:before {
  content: "\\e934";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .grid:before {
  content: "\\e938";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .home:before {
  content: "\\e939";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .list:before {
  content: "\\e93b";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .modal:before {
  content: "\\e93c";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .profile:before {
  content: "\\e941";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .report:before {
  content: "\\e942";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .settings:before {
  content: "\\e943";
  font-family: 'xdiagrams-icons';
}

.side-panel-title-thumbnail .detail:before {
  content: "\\e900";
  font-family: 'xdiagrams-icons';
}